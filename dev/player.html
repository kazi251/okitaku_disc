<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>置き卓補助ツール</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css">
  <script src="./firebaseConfig.js"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="robots" content="noindex, nofollow">
</head>
<body>

<div class="container">

  <!-- キャラクター選択 -->
  <div class="card">
    <div class="character-select-area">
      <label for="character-select">キャラクター:</label>
      <select id="character-select"></select>
      <button id="new-character-button" class="button-secondary">＋ 新規作成</button>
    </div>
  </div>

  <!-- キャラクターヘッダー -->
  <div class="card">
    <div class="character-header">
      <img src="./seeker_vault/default.png" id="explorer-image" alt="探索者画像" class="explorer-image">
      <div class="character-info">
        <h1 id="character-name">探索者 太郎</h1>
        <div class="scenario-label">探索中: <span id="current-scenario-name">-</span></div>
      </div>
    </div>
    <div class="stats-grid">
      <div class="stat-item"><span class="label">HP</span><span class="value"><span id="hp">-</span> / <span id="hp-max">-</span></span></div>
      <div class="stat-item"><span class="label">MP</span><span class="value"><span id="mp">-</span> / <span id="mp-max">-</span></span></div>
      <div class="stat-item"><span class="label">SAN</span><span class="value"><span id="san">-</span> / <span id="san-max">-</span></span></div>
      <div class="stat-item"><span class="label" id="other1-label">その他</span><span class="value" id="other">-</span></div>
      <div class="stat-item"><span class="label" id="other2-label">その他</span><span class="value" id="other2">-</span></div>
    </div>
     <div class="stat-item"><span class="label">メモ</span><span class="value" id="memo">-</span></div>
  </div>

  <!-- セリフ・ダイス -->
  <div class="card">
    <h2>アクション</h2>
    <div class="action-grid">
      <div>
        <label for="say-webhook-select">送信先</label>
        <select id="say-webhook-select"></select>
      </div>
      <div>
        <label for="say-content">セリフ</label>
        <textarea id="say-content" placeholder="セリフを入力..." rows="3"></textarea>
        <button id="send-button" class="button-primary">送信</button>
      </div>
      <div>
        <label for="dice-command">ダイスロール</label>
        <div class="input-wrapper">
          <input type="text" id="dice-command" placeholder="コマンドを入力または検索" autocomplete="off">
          <div id="suggestions"></div>
        </div>
        <button id="roll-button" class="button-primary">ダイス実行</button>
        <div id="result" class="dice-result">🎲 結果がここに表示されます</div>
      </div>
    </div>
  </div>

  <!-- パラメータ編集 -->
  <button class="toggle-button">パラメータ編集</button>
  <div class="toggle-content">
    <div class="form-grid">
      <div><label>HP: <input type="number" id="hp-input"> / <input type="number" id="hp-max-input"></label></div>
      <div><label>MP: <input type="number" id="mp-input"> / <input type="number" id="mp-max-input"></label></div>
      <div><label>SAN: <input type="number" id="san-input"> / <input type="number" id="san-max-input"></label></div>
      <div><label><input type="text" id="other1-name" placeholder="ラベル名">: <input type="number" id="other-input"></label></div>
      <div><label><input type="text" id="other2-name" placeholder="ラベル名">: <input type="number" id="other2-input"></label></div>
      <div><label>メモ: <textarea id="memo-input" rows="2"></textarea></label></div>
    </div>
    <div class="button-group">
      <button id="status-save-button" class="button-primary">保存</button>
      <button id="legacy-status-load" class="button-secondary">再読み込み</button>
      <button id="legacy-status-save" class="button-primary">保存＆送信</button>
    </div>
  </div>

  <!-- チャットパレット -->
  <button class="toggle-button">チャットパレット</button>
  <div class="toggle-content">
    <textarea id="chat-palette-input" placeholder="ここにチャットパレットを貼り付けてください" rows="8"></textarea>
    <div class="button-group">
      <button id="palette-save-button" class="button-primary">保存</button>
      <button id="load-button" class="button-secondary">再読み込み</button>
    </div>
  </div>

  <!-- キャラクター設定 -->
  <button class="toggle-button">キャラクター設定</button>
  <div class="toggle-content">
    <div class="form-grid">
      <div>
        <label for="name-input">名前</label>
        <input type="text" id="name-input" placeholder="変更後の名前を入力">
        <button id="update-name-button" class="button-primary">更新</button>
      </div>
      <div>
        <label>画像</label>
        <div class="button-group">
          <input type="file" id="image-upload" style="display: none;" accept="image/*">
          <button type="button" id="image-select-button" class="button-secondary">ファイル選択</button>
          <button id="image-save-button" class="button-primary">アップロード</button>
        </div>
        <span id="image-file-name">ファイルが選択されていません</span>
      </div>
      <div>
        <label for="scenario-id-input">シナリオ</label>
        <input type="text" id="scenario-id-input" placeholder="例:GQVMCy8GX7yibMMTO8MN">
        <div class="button-group">
          <button id="scenario-update-button" class="button-primary">登録</button>
          <button id="scenario-clear-button" class="button-secondary">削除</button>
          <button id="edit-load-button" class="button-secondary">再読み込み</button>
        </div>
      </div>
    </div>
  </div>

</div><!-- /.container -->

<!-- トースト -->
<div id="toast"></div>

<script type="module" src="player.js"></script>
</body>
</html>